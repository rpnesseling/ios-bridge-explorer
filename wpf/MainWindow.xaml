<Window x:Class="IOSBridgeExplorer.UI.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="iOS Bridge Explorer"
        Width="1100"
        Height="680"
        WindowStartupLocation="CenterScreen">
  <DockPanel>
    <Border DockPanel.Dock="Top" BorderBrush="#DADCE0" BorderThickness="0,0,0,1" Background="#F8F9FA">
      <Grid Margin="10">
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="320" />
          <ColumnDefinition Width="Auto" />
          <ColumnDefinition Width="Auto" />
          <ColumnDefinition Width="Auto" />
          <ColumnDefinition Width="Auto" />
          <ColumnDefinition Width="Auto" />
          <ColumnDefinition Width="Auto" />
          <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <ComboBox Grid.Column="0"
                  Margin="0,0,8,0"
                  ItemsSource="{Binding Devices}"
                  SelectedItem="{Binding SelectedDevice}"
                  DisplayMemberPath="Name" />
        <Button Grid.Column="1" Margin="0,0,8,0" Padding="12,6" Content="Refresh Devices" Command="{Binding RefreshDevicesCommand}" />
        <Button Grid.Column="2" Margin="0,0,8,0" Padding="12,6" Content="Connect" Command="{Binding ConnectCommand}" />
        <Button Grid.Column="3" Margin="0,0,8,0" Padding="12,6" Content="Up" Command="{Binding UpCommand}" />
        <Button Grid.Column="4" Margin="0,0,8,0" Padding="12,6" Content="Refresh Folder" Command="{Binding RefreshDirectoryCommand}" />
        <Button Grid.Column="5" Margin="0,0,8,0" Padding="12,6" Content="Diagnostics" Command="{Binding DiagnosticsCommand}" />
        <Button Grid.Column="6" Margin="0,0,8,0" Padding="12,6" Content="Open Log" Command="{Binding OpenLogCommand}" />
        <TextBox Grid.Column="7" Text="{Binding CurrentPath}" IsReadOnly="True" VerticalContentAlignment="Center" />
      </Grid>
    </Border>

    <Grid Margin="10">
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="300" />
        <ColumnDefinition Width="10" />
        <ColumnDefinition Width="*" />
      </Grid.ColumnDefinitions>

      <GroupBox Header="Devices" Grid.Column="0">
        <ListBox ItemsSource="{Binding Devices}" SelectedItem="{Binding SelectedDevice}">
          <ListBox.ItemTemplate>
            <DataTemplate>
              <StackPanel Margin="0,3">
                <TextBlock FontWeight="SemiBold" Text="{Binding Name}" />
                <TextBlock Foreground="#6A6E73" FontSize="12" Text="{Binding Udid}" />
              </StackPanel>
            </DataTemplate>
          </ListBox.ItemTemplate>
        </ListBox>
      </GroupBox>

      <GroupBox Header="Files" Grid.Column="2">
        <ListView ItemsSource="{Binding Entries}" SelectedItem="{Binding SelectedEntry}" MouseDoubleClick="FileList_MouseDoubleClick">
          <ListView.View>
            <GridView>
              <GridViewColumn Header="Type" Width="80" DisplayMemberBinding="{Binding Type}" />
              <GridViewColumn Header="Name" Width="300" DisplayMemberBinding="{Binding Name}" />
              <GridViewColumn Header="Size" Width="120" DisplayMemberBinding="{Binding SizeBytes}" />
              <GridViewColumn Header="Modified" Width="180" DisplayMemberBinding="{Binding ModifiedAt, StringFormat={}{0:yyyy-MM-dd HH:mm:ss}}" />
              <GridViewColumn Header="Path" Width="300" DisplayMemberBinding="{Binding Path}" />
            </GridView>
          </ListView.View>
        </ListView>
      </GroupBox>
    </Grid>

    <StatusBar DockPanel.Dock="Bottom">
      <StatusBarItem>
        <TextBlock Text="{Binding StatusText}" />
      </StatusBarItem>
    </StatusBar>
  </DockPanel>
</Window>

